<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">
<ui:composition>

	<p:toolbar style="margin-top: 20px">
		<p:toolbarGroup align="left">
			<p:commandButton value="Adicionar"
				action="#{cadastroPacienteBean.adicionarAvaliacaoDietetica}"
				onclick="PF('adicionarAvaDietetica').show(); return false"
				icon="ui-icon-circle-plus" />
		</p:toolbarGroup>
	</p:toolbar>

	<p:dataTable id="tabelaDietetica" var="avaliacaoDietetica" style="margin-top: 20px"
		value="#{cadastroPacienteBean.paciente.listaAvaliacaoDietetica}"
		emptyMessage="Nenhuma Avaliação Dietética cadastrada.">
		<f:facet name="header">
           Tabela
        </f:facet>
		<p:column headerText="Data de cadastro"
			style="text-align:center;width:15%;white-space:nowrap;">
			<h:outputText value="#{avaliacaoDietetica.data}">
				<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy HH:mm"
					timeZone="America/Sao_Paulo" />
			</h:outputText>
		</p:column>

		<p:column style="text-align: center; width: 6%">
			<p:commandButton icon="ui-icon-trash" title="Excluir" process="@this"
				oncomplete="PF('confirmacaoAvaliacaoDiet').show()">
				<f:setPropertyActionListener value="#{avaliacaoDietetica}"
					target="#{cadastroPacienteBean.avaliacaoDieteticaSelecionada}" />
			</p:commandButton>
			<p:commandButton icon="ui-icon-search" title="Visualizar"
				oncomplete="PF('adicionarVisualizarAvaDietetica').show()"
				update=":frmPaciente:tabView:dialogVisualizarDietetica">
				<f:setPropertyActionListener value="#{avaliacaoDietetica}"
					target="#{cadastroPacienteBean.avaliacaoDieteticaSelecionada}" />
			</p:commandButton>
		</p:column>

	</p:dataTable>
	
	<p:dialog header="Inclusão de Avaliação Dietética"
		id="dialogDietetica" widgetVar="adicionarAvaDietetica" modal="true"
		resizable="false" height="500px" width="600px" showEffect="clip" hideEffect="clip">
		<p:fieldset id="fieldsetDiet" legend="RECORDATÓRIO 24H"
			style="margin-bottom:20px">
			<h:panelGrid id="painelDiet" columns="2" cellspacing="4"
				cellpadding="4">

				<h3>Desjejum</h3>
				<p:inputTextarea rows="4" cols="50" value="#{cadastroPacienteBean.novaAvaliacaoDietetica.desjejum}"/>
				
				<h3>Lanche</h3>
				<p:inputTextarea rows="4" cols="50" value="#{cadastroPacienteBean.novaAvaliacaoDietetica.lancheManha}"/>
				
				<h3>Almoço</h3>
				<p:inputTextarea rows="4" cols="50" value="#{cadastroPacienteBean.novaAvaliacaoDietetica.almoco}"/>
				
				<h3>Lanche</h3>
				<p:inputTextarea rows="4" cols="50" value="#{cadastroPacienteBean.novaAvaliacaoDietetica.lancheTarde}"/>
				
				<h3>Jantar</h3>
				<p:inputTextarea rows="4" cols="50" value="#{cadastroPacienteBean.novaAvaliacaoDietetica.jantar}"/>
				
				<h3>Ceia</h3>
				<p:inputTextarea rows="4" cols="50" value="#{cadastroPacienteBean.novaAvaliacaoDietetica.ceia}"/>
				
				<h3>Alimentação no final de semana</h3>
				<p:inputTextarea rows="4" cols="50" value="#{cadastroPacienteBean.novaAvaliacaoDietetica.alimentacaoFinalSemana}"/>
				
				<h3>Preferências Alimentares</h3>
				<p:inputTextarea rows="4" cols="50" value="#{cadastroPacienteBean.novaAvaliacaoDietetica.preferenciasAlimentares}"/>
				
				<h3>Aversões alimentares</h3>
				<p:inputTextarea rows="4" cols="50" value="#{cadastroPacienteBean.novaAvaliacaoDietetica.aversoesAlimentares}"/>

				<p:spacer />
				<p:outputLabel/>
				<p:outputLabel/>
				<p:commandButton value="Incluir" style="margin-top: 20px"
					action="#{cadastroPacienteBean.salvarAvaliacaoDietetica}"
					icon="ui-icon-disk"
					process="painelDiet"
					update=":frmPaciente:tabView:tabelaDietetica, :frmPaciente:growlPaciente"
					ajax="true" />

			</h:panelGrid>
		</p:fieldset>
	</p:dialog>

	<p:dialog header="Avaliação Dietética"
		id="dialogVisualizarDietetica" widgetVar="adicionarVisualizarAvaDietetica" modal="true"
		resizable="false" showEffect="clip" hideEffect="clip">
		<p:fieldset id="fieldsetVisualizarDiet" legend="Resultados"
			style="margin-bottom:20px">
			<h:panelGrid id="painelVisualizarDiet" columns="2" cellspacing="4"
				cellpadding="4">

				<p:outputLabel value="Desjejum:" />
				<p:outputLabel value="#{cadastroPacienteBean.avaliacaoDieteticaSelecionada.desjejum}" style="font-weight:bold"/>
				
				<p:outputLabel value="Lanche:" />
				<p:outputLabel value="#{cadastroPacienteBean.avaliacaoDieteticaSelecionada.lancheManha}" style="font-weight:bold"/>
				
				<p:outputLabel value="Almoço:" />
				<p:outputLabel value="#{cadastroPacienteBean.avaliacaoDieteticaSelecionada.almoco}" style="font-weight:bold"/>
				
				<p:outputLabel value="Lanche:" />
				<p:outputLabel value="#{cadastroPacienteBean.avaliacaoDieteticaSelecionada.lancheTarde}" style="font-weight:bold"/>
				
				<p:outputLabel value="Jantar:" />
				<p:outputLabel value="#{cadastroPacienteBean.avaliacaoDieteticaSelecionada.jantar}" style="font-weight:bold"/>
				
				<p:outputLabel value="Ceia:" />
				<p:outputLabel value="#{cadastroPacienteBean.avaliacaoDieteticaSelecionada.ceia}" style="font-weight:bold"/>
				
				<p:outputLabel value="Alimentação no final de semana:" />
				<p:outputLabel value="#{cadastroPacienteBean.avaliacaoDieteticaSelecionada.alimentacaoFinalSemana}" style="font-weight:bold"/>
				
				<p:outputLabel value="Preferências alimentares:" />
				<p:outputLabel value="#{cadastroPacienteBean.avaliacaoDieteticaSelecionada.preferenciasAlimentares}" style="font-weight:bold"/>
				
				<p:outputLabel value="Aversões alimentares:" />
				<p:outputLabel value="#{cadastroPacienteBean.avaliacaoDieteticaSelecionada.aversoesAlimentares}" style="font-weight:bold"/>

			</h:panelGrid>
		</p:fieldset>
	</p:dialog>
	

	<p:confirmDialog header="Exclusão de Avaliação Dietética"
		message="Tem certeza que deseja excluir a avaliação"
		widgetVar="confirmacaoAvaliacaoDiet">
		<p:button value="Não"
			onclick="PF('confirmacaoAvaliacaoDiet').hide(); return false;" />
		<p:commandButton value="Sim"
			oncomplete="PF('confirmacaoAvaliacaoDiet').hide(); return false;"
			update=":frmPaciente:tabView:tabelaDietetica, :frmPaciente:growlPaciente"
			process="@this"
			action="#{cadastroPacienteBean.removerAvaliacaoDietetica}" />
	</p:confirmDialog>

</ui:composition>
</html>